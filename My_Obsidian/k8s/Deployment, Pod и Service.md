В чем принципиальная разница между объектами **Deployment**, **Pod** и **Service**? Как они взаимодействуют для предоставления доступа к приложению?

|**Объект**|**Роль (Кратко)**|**Дополнительный нюанс для Senior**|
|---|---|---|
|**Pod**|Минимальная единица, содержащая 1+ контейнеров и общие ресурсы (сеть, хранилище).|**Ключевой принцип:** $\text{Pod}$'ы являются **одноразовыми** (Ephemeral) и несамовосстанавливающимися. Если $\text{Pod}$ умирает, его нельзя восстановить.|
|**Deployment**|Объект управления, описывающий желаемое состояние. Управляет $\text{ReplicaSet}$.|$\text{Deployment}$ обеспечивает **декларативное управление** жизненным циклом (версирование, откат, стратегии обновления). Он управляет $\text{Pod}$'ами не напрямую, а через промежуточный объект **$\text{ReplicaSet}$**.|
|**Service**|Обеспечивает **стабильную точку доступа** к набору $\text{Pod}$'ов.|$\text{Service}$ использует **Селекторы** ($\text{Labels}$) для динамического обнаружения $\text{Pod}$'ов. Он абстрагирует сеть от динамических $\text{Pod IP}$-адресов.|
Вся магия Kubernetes для запуска приложения сводится к следующей цепочке:

1. **Deployment Создает Pod'ы (через ReplicaSet):**
    
    - Вы создаете $\text{Deployment}$ и указываете, какие метки ($\text{Labels}$) должны быть у его $\text{Pod}$'ов (например, `app: my-api`).
        
    - $\text{Deployment}$ создает $\text{ReplicaSet}$, а $\text{ReplicaSet}$ создает $\text{Pod}$'ы, гарантируя, что их количество соответствует желаемому.
        
2. **Pod'ы Получают IP-адреса:**
    
    - Когда $\text{Pod}$ запускается на Worker Node, он получает свой уникальный, но **непостоянный** ($\text{Ephemeral}$) $\text{IP}$-адрес из пула кластера.
        
3. **Service Находит Pod'ы (с помощью Селекторов):**
    
    - Вы создаете $\text{Service}$ и указываете в его конфигурации **те же самые метки** (`app: my-api`).
        
    - $\text{Service}$ использует эти метки ($\text{Selector}$) для автоматического поиска всех $\text{Pod}$'ов с этими метками.
        
    - $\text{Service}$ создает **Endpoint-объект**, который содержит список актуальных $\text{IP}$-адресов этих $\text{Pod}$'ов.
        
4. **Доступ к Service:**
    
    - Любой другой $\text{Pod}$ или внешний пользователь, обращаясь к **стабильному $\text{IP}$ или DNS-имени $\text{Service}$**, получает доступ к одному из $\text{Pod}$'ов, управляемому $\text{Deployment}$'ом, благодаря сетевым правилам, настроенным $\text{kube-proxy}$.